{% extends 'layout.html' %}

{% block content %}

    <table>
        <tr>
            <th> Books Purchased by {{ session['user_name'] }}</th>
        </tr>
                <!-- checks current data to show on page-->
        {% if books == none %}
            <tr>
                <td>nothing to see here.</td>
            </tr>
        {% elif books|length == 0 %}
            <tr>
                <td>Search did not return any results.</td>
            </tr>
        {% else %}
            {% for book in books %}
                <tr>
                    <td>
                        {{ book.title }}                         Price: ${{ book.price }}     Quantity: {{ book.quantity }}
                        <br>
                        <button onclick=location.href="{{url_for('books_bp.books_view', id=book.id)}}">view details</button>
                    </td>
                </tr>
            {% endfor %}
        {% endif %}
        <tr>
            <td>
                Total Price: ${{ total_price }}
            </td>
        </tr>
    </table>

    <div id='purchased'>
        <h3 id='cart-user'>{{ session['user_name'] }}'s books</h3>
        
            {% if books|length == 0 %}
                    <h3 id='cart-empty'>Your Library is empty</h3>
            {% else %}
                <table>
                    {% for book in books %}
                        <tr>
                            <td>
                                {{ book.title }}
                                <br>
                                <button onclick=location.href="{{url_for('books_bp.books_view', id=book.id)}}">view book</button>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        
    </div>

{% endblock %}