{% extends 'layout.html' %}

{% block content %}

    <h2>
        {{ book.title }}
    </h2>
    
        <p>
            Author:
            {% for author in book.authors %}
                {{author.full_name}}<br>
            {% endfor %}
        </p>
        
        <p>Publisher: {{ book.publisher.name }}</p>

        <p>Release year: <b>{{ book.release_year }}</b></p>

        <p>Description: {{ book.description }}</p>


    <div id="book-options">

        {% if book.reviews|length > 0 and book.id != show_reviews_for_book %}
            <button class="btn-general" onclick=location.href="{{url_for('books_bp.books_view', id=book.id, show_reviews_for_book=book.id)}}">{{book.reviews|length}} Reviews</button>
        {% endif %}

        <button class="btn-general" onclick=location.href="{{url_for('books_bp.book_review', id=book.id)}}">Review</button>
    </div>

    
    {% if book.id == show_reviews_for_book %}

        <div style="clear:both">

            {% for review in book.reviews %}

                <p>{{review.review_text}} by {{review.user_name}}, {{review.timestamp}}</p>

                <p>{{review.rating}}</p>

            {% endfor %}
        </div>

    {% endif %}

{% endblock %}